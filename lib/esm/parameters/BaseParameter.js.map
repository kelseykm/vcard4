{"version":3,"file":"BaseParameter.js","sources":["../../../src/parameters/BaseParameter.js"],"sourcesContent":["export class BaseParameter {\n  #abstractPropertiesAndMethods = [\n    \"param\",\n    \"value\",\n    \"valueXML\",\n    \"valueJSON\",\n    \"identifier\",\n  ];\n\n  checkAbstractPropertiesAndMethods() {\n    if (\n      !this.#abstractPropertiesAndMethods.every(\n        (abstractPropertyOrMethod) =>\n          Object.prototype.hasOwnProperty.call(\n            this,\n            abstractPropertyOrMethod\n          ) ||\n          Object.prototype.hasOwnProperty.call(\n            Object.getPrototypeOf(this),\n            abstractPropertyOrMethod\n          ) ||\n          Object.prototype.hasOwnProperty.call(\n            this.constructor,\n            abstractPropertyOrMethod\n          )\n      )\n    )\n      throw new Error(\n        \"All abstract properties and methods in abstract base class must be defined in child class\"\n      );\n  }\n\n  repr() {\n    return `${this.constructor.param || this.param}=${this.value}`;\n  }\n\n  reprXML() {\n    const tag =\n      this.constructor.param?.toLowerCase() || this.param?.toLowerCase();\n\n    const knownTagRegExp =\n      /^(?:altid|base|calscale|cc|geo|index|label|language|level|mediatype|pid|pref|sort-as|type|tz|value|x-[A-Za-z0-9]+)$/;\n\n    if (!knownTagRegExp.test(tag))\n      return `<unknown>${this.valueXML\n        .replace(/<[a-z\\-]+?>/g, \"<text>\")\n        .replace(/<\\/[a-z\\-]+?>/g, \"</text>\")}</unknown>`;\n    else if (tag === \"value\") return \"\";\n\n    return `<${tag}>${this.valueXML}</${tag}>`;\n  }\n\n  reprJSON() {\n    const key =\n      this.constructor.param?.toLowerCase() || this.param?.toLowerCase();\n\n    if (key === \"value\") return {};\n\n    let value = this.valueJSON;\n    value.shift();\n    value = value.map((val) => val.toString());\n\n    if (value.length === 1) value = value.pop();\n\n    return { [key]: value };\n  }\n\n  constructor() {\n    if (this.constructor === BaseParameter)\n      throw new Error(\"Cannot create instance of base class\");\n  }\n}\n\nObject.freeze(BaseParameter);\n"],"names":["BaseParameter","_classCallCheck","_classPrivateFieldInitSpec","_abstractPropertiesAndMethods","writable","value","constructor","Error","_createClass","key","checkAbstractPropertiesAndMethods","_this","_classPrivateFieldGet","every","abstractPropertyOrMethod","Object","prototype","hasOwnProperty","call","getPrototypeOf","repr","concat","param","reprXML","_this$constructor$par","_this$param","tag","toLowerCase","knownTagRegExp","test","valueXML","replace","reprJSON","_this$constructor$par2","_this$param2","valueJSON","shift","map","val","toString","length","pop","_defineProperty","freeze"],"mappings":"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"}