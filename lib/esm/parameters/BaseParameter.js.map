{"version":3,"file":"BaseParameter.js","sources":["../../../src/parameters/BaseParameter.js"],"sourcesContent":["export class BaseParameter {\r\n  #abstractPropertiesAndMethods = [\r\n    \"param\",\r\n    \"value\",\r\n    \"valueXML\",\r\n    \"valueJSON\",\r\n    \"identifier\",\r\n  ];\r\n\r\n  checkAbstractPropertiesAndMethods() {\r\n    if (\r\n      !this.#abstractPropertiesAndMethods.every(\r\n        (abstractPropertyOrMethod) =>\r\n          Object.prototype.hasOwnProperty.call(\r\n            this,\r\n            abstractPropertyOrMethod\r\n          ) ||\r\n          Object.prototype.hasOwnProperty.call(\r\n            Object.getPrototypeOf(this),\r\n            abstractPropertyOrMethod\r\n          ) ||\r\n          Object.prototype.hasOwnProperty.call(\r\n            this.constructor,\r\n            abstractPropertyOrMethod\r\n          )\r\n      )\r\n    )\r\n      throw new Error(\r\n        \"All abstract properties and methods in abstract base class must be defined in child class\"\r\n      );\r\n  }\r\n\r\n  repr() {\r\n    return `${this.constructor.param || this.param}=${this.value}`;\r\n  }\r\n\r\n  reprXML() {\r\n    const tag =\r\n      this.constructor.param?.toLowerCase() || this.param?.toLowerCase();\r\n\r\n    const knownTagRegExp =\r\n      /^(?:altid|base|calscale|cc|geo|index|label|language|level|mediatype|pid|pref|sort-as|type|tz|value|x-[A-Za-z0-9]+)$/;\r\n\r\n    if (!knownTagRegExp.test(tag))\r\n      return `<unknown>${this.valueXML\r\n        .replace(/<[a-z\\-]+?>/g, \"<text>\")\r\n        .replace(/<\\/[a-z\\-]+?>/g, \"</text>\")}</unknown>`;\r\n    else if (tag === \"value\") return \"\";\r\n\r\n    return `<${tag}>${this.valueXML}</${tag}>`;\r\n  }\r\n\r\n  reprJSON() {\r\n    const key =\r\n      this.constructor.param?.toLowerCase() || this.param?.toLowerCase();\r\n\r\n    if (key === \"value\") return {};\r\n\r\n    let value = this.valueJSON;\r\n    value.shift();\r\n    value = value.map((val) => val.toString());\r\n\r\n    if (value.length === 1) value = value.pop();\r\n\r\n    return { [key]: value };\r\n  }\r\n\r\n  constructor() {\r\n    if (this.constructor === BaseParameter)\r\n      throw new Error(\"Cannot create instance of base class\");\r\n  }\r\n}\r\n\r\nObject.freeze(BaseParameter);\r\n"],"names":["BaseParameter","_classCallCheck","_classPrivateFieldInitSpec","_abstractPropertiesAndMethods","constructor","Error","_createClass","key","value","checkAbstractPropertiesAndMethods","_this","_classPrivateFieldGet","every","abstractPropertyOrMethod","Object","prototype","hasOwnProperty","call","getPrototypeOf","repr","concat","param","reprXML","_this$constructor$par","_this$param","tag","toLowerCase","knownTagRegExp","test","valueXML","replace","reprJSON","_this$constructor$par2","_this$param2","valueJSON","shift","map","val","toString","length","pop","_defineProperty","freeze"],"mappings":"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"}