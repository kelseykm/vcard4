{"version":3,"file":"PIDParameter.js","sources":["../../../src/parameters/PIDParameter.js"],"sourcesContent":["import { BaseParameter } from \"./BaseParameter.js\";\nimport { MissingArgument, InvalidArgument } from \"../errors/index.js\";\n\nexport class PIDParameter extends BaseParameter {\n  static param = \"PID\";\n  static identifier = \"PIDParameter\";\n\n  #pidValue;\n  #pidRegExp = /^\\d+(?:\\.\\d+)?$/;\n\n  get value() {\n    return Array.isArray(this.#pidValue)\n      ? this.#pidValue\n          .map((val) => {\n            if (Array.isArray(val))\n              return val.map((innerVal) => innerVal.repr()).join(\".\");\n            return val.repr();\n          })\n          .join(\",\")\n      : this.#pidValue.repr();\n  }\n\n  get valueXML() {\n    const xml = Array.isArray(this.#pidValue)\n      ? this.#pidValue\n          .map((val) => {\n            if (Array.isArray(val))\n              return (\n                \"<integer>\" +\n                val.map((innerVal) => innerVal.repr()).join(\".\") +\n                \"</integer>\"\n              );\n\n            return val.reprXML();\n          })\n          .join(\"\")\n      : this.#pidValue.reprXML();\n\n    return xml.replaceAll(\"integer\", \"text\");\n  }\n\n  get valueJSON() {\n    return Array.isArray(this.#pidValue)\n      ? [\n          \"integer\",\n          ...this.#pidValue.map((val) => {\n            if (Array.isArray(val))\n              return Number(val.map((innerVal) => innerVal.repr()).join(\".\"));\n            return val.reprJSON().pop();\n          }),\n        ]\n      : this.#pidValue.reprJSON();\n  }\n\n  #validate(pidValue) {\n    if (typeof pidValue === \"undefined\")\n      throw new MissingArgument(\"Value for PIDParameter must be supplied\");\n    else if (\n      !Array.isArray(pidValue) &&\n      pidValue.constructor.identifier !== \"IntegerType\"\n    )\n      throw new InvalidArgument(\"Invalid value for PIDParameter\");\n    else if (\n      Array.isArray(pidValue) &&\n      !pidValue.every((val1) => {\n        if (Array.isArray(val1))\n          return (\n            val1.length === 2 &&\n            val1.every((val2) => val2.constructor.identifier === \"IntegerType\")\n          );\n        return val1.constructor.identifier === \"IntegerType\";\n      })\n    )\n      throw new InvalidArgument(\"Invalid value for PIDParameter\");\n  }\n\n  constructor(pidValue) {\n    super();\n\n    this.#validate(pidValue);\n    this.#pidValue = pidValue;\n\n    this.checkAbstractPropertiesAndMethods();\n    Object.freeze(this);\n  }\n}\n\nObject.freeze(PIDParameter);\n"],"names":["PIDParameter","pidValue","checkAbstractPropertiesAndMethods","Object","freeze","Array","isArray","map","val","innerVal","repr","join","xml","reprXML","replaceAll","Number","reprJSON","pop","BaseParameter","MissingArgument","constructor","identifier","InvalidArgument","every","val1","length","val2"],"mappings":"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"}